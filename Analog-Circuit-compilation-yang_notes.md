# 1. Analog-Circuit-compilation-yang_notes
内容比较零散
## 1.1. 名词解释
- INA：仪器仪表放大器
- FDA：全差分放大器
- Auo：开环增益。A是增益 u表示电压， o表示开环
- Auf：闭环增益。f是feedback

## 1.2. 总结


# 2. BJT和MOSFET
原书里有很大一部分是关于这个内容的。我这里把这个内容移到了`BJT-MOSFET`章节里。


# 3. 运放
`参考OPA的章节`
## 3.1. 理想运放
理想运放：
- Auo非常大，而且频响稳定，高频不衰减
- 输入阻抗无穷大
- 输出阻抗为0

## 3.2. 计算技巧
- 有ref的分析：
	- 一定要用叠加定理，会让分析变得简单
- 跷跷板分析：
	- 电压有多个支路的，要联立方程组解出电压才行
	- 能明确把一个回路断开，那就不用联立方程组了
- 运放的工作点设置：
	- 比如INA，虽然外部的输入信号满足电气要求，但是中间的信号可以会超出VCC，导致输出异常
## 3.3. 关键参数
- 运放误差的原因：
	- **输入失调电压**：input offset voltage
	    - 定义：输入这个电压，可以让输出为0
	    - 原因：运放结构的非对称性，一般来说温飘也会很大
	        - 和运放的型号有关系，还和电路的增益有关系
	- ***输入偏置电流***：input bias current
	    - 定义：提供运放静态工作点的电流
	    - 注意：BJT的这个参数会比较大，MOSFET的这个参数会比较小
	- ***输入失调电流***： input offset current
	    - 定义：两个输入偏置电流的差值
    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600809_20200811234833383_201232110.png )
    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600810_20200811234844939_1968812392.png )
- 运放误差的表现
	- ***输出失调电压***：
	    - 定义：0输入的时候，输出的电压
	    - 原因：是以上三个非理想参数共同导致输出失调电压
	    - 阻抗匹配可以减少输出失调电压么：
	        - 不幸，因为只有当Ib+和Ib-是一样大的，阻抗匹配的时候，可以消除
	        - 但是实力上Ios=Ib+ -Ib-，这个量级和Ib差不多，所以两者是不一样大的
	        - 所以当Ios比Ib小的时候，要考虑匹配；否则不一定
	    - 降低输出失调电压：
	        - 选择输入失调电压小的片子：这一项是抵消不掉的
	        - 选择Ib小的片子：这一项影响大，因为值大
	        - 选择小的外部电阻：因为放大倍数小，放大的就小
- 输入/出电压范围
    - 定义：最大的输入电压，一般会比VCC低。
    - 理解rail to rail
    - 输出电压范围和负载有关系
- **共模抑制比**：CMRR
    - 定义：把运放的开环增益分成两部分
    - 测量：利用差分输入，同时接Ui但是输出Uo不是0，测出CMRR
        - 因为电阻不匹配，会导致CMRR变小。本来两个相消，现在消不掉了，共模就被放大了
        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600811_20200811234902556_1401839368.png )
        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600812_20200811234917257_671166739.png )
- **电源电压抑制比**：PSRR
    - 定义：当输入的电源增大时，等效为一个多大的输入电压
    - 含义：运放对电源波动的抑制能力
    - 特点：对高频的噪声的抑制能力比较弱，所以需要旁路电容
- 开环电压增益Auo：
    - 定义：
    - 关键：增益带宽积，Auo和F是有关系的。只有1个极点，那么是以-20db每10倍频
- 单位增益带宽：UGBF
    - 定义：当Au变为1时候的f
- 压摆率：slew rate
    - 定义：电压输出的变化率 v/us
- 满功率带宽：
    - 定义：摆率要满足要求，输出的增益也满足要求的f
    - slew rate>2 pi Umax*f
- 至稳时间：
    - 定义：输入信号之后，多久才能达到有效的输出
    - 原理：和运放的延时和摆率有关系
- 增益/相位裕度：
    - 定义：
        - 相位裕度：
            - 在开环条件下，运放的增益到0db时候的相位和-180的差；
        - 增益裕度：
            - 在开环条件下，运放的相位到-180度，0-增益的值
    - 描述了运放的稳定性
- 热阻：
    - 定义：每1w可以导致的温升。热阻越大，那么散热越困难。单位是摄氏度/W
        - ja：junction 到ambient
        - jc：junction 到case

## 3.4. 噪声参数和计算
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600813_20200811234940273_1715268329.png )
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600813_20200811234954204_694328175.png )
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600814_20200811235009088_826740951.png )
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600815_20200811235022621_815967367.png )
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600815_20200811235045699_132967427.png )
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600816_20200811235057821_1400552709.png )
- 噪声参数：
    - 定义：各个噪声的有效值的平方和，单位nV^2.噪声是一种能量
        - 噪声——电能密度———电压密度
        - 噪声——噪声电压的有效值
    - 电能密度
    - 电压密度：单位 nV/sqrt(Hz)
        - **白噪声**，值恒为k，一般是主要因素
        - **1/f噪声**，电压密度为1/f关系
    - 噪声电压的有效值
    - 理论计算
        - 从数据手册得到C，K
        - fa默认0.1 fb从增益，增益带宽积，Kp计算
        - 得到运放输入噪声的有效值
        - 乘以放大倍数（R1+Rf）/R1
    - 示波器测量
        - Vpp=6.6Vrms
            - 因为3.3∂的概率是99.9%
## 3.5. 反馈和增益计算
1. 负反馈判断
	1. 找到反馈环路
	2. 输出的位置给+，沿着回路回来的信号是+那就是正反馈
1. 极性传递
	1. ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600792_20200810105601620_682667781.png )
1. 负反馈的作用
	1. 降低增益
	2. 闭环增益由电路结构决定，不受开环增益
	3. 稳定性提高
	4. 频响拓宽
	5. 提高失真度，因为Auf变得很稳定
### 3.5.1. 框图法-MF法
使用MF法，对后续的电路分析很有用，所以要掌握
- F：反馈系数
	- 输入为0，(-U++U-)/Xo
	- 为什么：把下面框图和实际运放模型联立，就可以得出这个结论
- M：衰减系数
	- 输出为0，(U+-U-)/Xi
- 结论：Auf和Auo无关，在深度负反馈的情况下，Auf=M/F
	- 避免了三极管的计算静态工作点。
		- 因为是电流增益，还要建立动态模型才知道放大的Au
- 框图：
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600793_20200810112052279_2038699446.png )

### 3.5.2. 虚短虚断法
注意：一定要先分析是不是负反馈，才能使用虚短虚断
- 原理：
	- 虚短：因为Auo很大，所以+-的压差很小
	- 虚断：因为输入阻抗很大。输入电阻会被放大Auo倍
- 缺点：
	- 对频响的理解不够

### 3.5.3. 大运放法
- 大运放法：
    - 要点：找出负反馈回路，然后找到+ -，画出等效放大图
    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600808_20200811234735278_379076901.png )
### 3.5.4. 正反馈的作用
- 在迟滞回路里
	- 因为就是0/1输出，所以判断会比较简单
- 在自激震荡里
	- 因为文式震荡电路是有衰减的
	- 正反馈补偿衰减的增益
	- 不要接多级放大，环路温度判据：相移180时，要-3db余量
- howland电流源
	- 很巧妙，有正反馈也有负反馈。
	- 加入负载电阻之后，负反馈的F比正反馈强，所以还是负反馈，可以继续使用虚短虚断
	


## 3.6. 关键参数
### 3.6.1. 开环增益和环路增益
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600795_20200811230734619_283109582.png )
### 3.6.2. 反馈电阻
反馈电阻不能太大，会导致噪声大，偏置电流会导致更大的噪声

### 3.6.3. 输入电阻计算
同向放大的输入电阻很大。如果是简单的计算，把电平不变点接GND。因为叠加定理把。
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600795_20200811233918582_78432889.png )

反向放大的输入电阻不大
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600796_20200811233939615_1582133825.png )

### 3.6.4. 输出电阻计算

- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600797_20200811233955229_780679621.png )


## 3.7. 运放使用注意点
- INA一定要有直流通路，因为是运放的+端
    - 因为有偏置电流，没有通路就建立不起来
    - 所以直接接电容，没有下拉电阻是个错误的方式
- 调零
    - 调零的确可以使得输出为0，但是温飘又会导致非理想
    - 所以选择本身失调电压和失调温飘电压小的运放才是王道
- REF脚
    - 这个脚对阻抗敏感，所以要射击跟随之后输入
        - 如果输入大阻抗，会破坏INA的对称结构，导致CMRR下降
- 电流回馈型运放
    - Rf不能随便选，要根据Noise gain来
    - Noise gain就是F。
        - 同向：就是同向放大倍数
        - 反向：就是绝对值+1

## 3.8. 全差分运放FDA
FDA：全差分放大器
- 应用：
    - 全链路都是差分传递
    - 差分转单端
    - 单端转差分


## 3.9. 自己搭建运放
- 自己设计一个运放
    - 典型电路：
    - 注意点：
        - 使用镜像电流源做恒流源，可以保证静态电阻小，动态电阻大
            - 静态电阻：直流工作点
            - 动态电阻：增益
        - c要取的很小，做成低通。让运放的高频增益下降，防止相位移动180，增益没到-3db
        - 两个二极管，防止交越失真。好像防止不了
        - 推挽电路：使得输出电阻很小

## 3.10. 常用拓扑特性
### 3.10.1. 同向放大
### 3.10.2. 反向放大
### 3.10.3. T型反馈比例器
- 基本拓扑：
	- 基于反向比例器，但是特性更加优化
- 优点
	- 高增益
	- 高输入阻抗，
	- 反馈电阻小，噪声好

### 3.10.4. 加法器
- 基本拓扑：
	- 同向加法：
	- 反向加法：
	-  ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600797_20200811234048670_1904790624.png )


### 3.10.5. 减法器
- 减法器
    - 问题：
        - 输入电阻小
        - 对电阻的匹配度和精度要求高
    - 解决方式：
        - AD8276 内置4个高精度电阻，以及匹配好
    - 典型电路：
	    

### 3.10.6. 电平平移和缩放电路
- 电平平移和缩放电路
    - 主要用于ADC输入，可以调节信号的幅度和偏置电压
    - 分析：用叠加定理分析
    - 典型电路图 AD8275：
	    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600798_20200811234116341_1277291739.png )

### 3.10.7. 仪表放大器
- 仪表放大器
    - 优点：
        - 输入端是高阻
        - 增益电阻就1个，方便调节增益
        - 内部电阻都是控制好的
    - 典型电路：三电阻
	    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600798_20200811234136454_1195721961.png )
    - 典型电路：二电阻	
	    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600799_20200811234202758_347029901.png )

### 3.10.8. 压控电流源
- 压控电流源
    - 最简单的压控电流源
        - 典型电路
    - howland压控电流源
        - 原理：未接负载的时候，F+/-一样大，接了负载，就是负反馈电路了
        - 缺点：
            - 因为U+/-不能做大，所以电流不能做大
            - 电阻的匹配性难
        - I=Uin/R1
        - 典型电路:
	        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600800_20200811234228459_2113444502.png )
    - 基于差动放大的电流源
        - 优点：
            - 单电阻调节
            - 利用了差动运放里的高精度电阻
            - 可以扩大输出电流
        - 典型电路
	        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600800_20200811234250648_1282223734.png )
    - 基于仪放的电流源
        - 优点：
            - 比差动放大器，输入阻抗更高
        - 缺点：
            - 不能扩流，用在小电流。因为想要扩容，三极管接在运放的输出，这个电路的运放输出已经有用了
        - 典型电路
	        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600801_20200811234301041_335899693.png )
	        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600839_20200821125204650_190212999.png )
	        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600840_20200821125212327_1454207457.png )

### 3.10.9. 积分电路
- 积分电路
    - 缺点：
        - 即使输入接gnd，因为有偏置电流和失调电压，总有电流流过电容，那么电容电压就会升高，导致运放的输出也会饱和
        - 改进：
            - 电容上并联一个大电阻，让非理想的电流从电阻上流过
    - 典型电路：Rf接电容
	    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600802_20200811234322448_1879115935.png )
	    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600802_20200811234412386_1407006763.png )
### 3.10.10. 微分电路
- 微分电路
    - 典型电路：R1接电阻

### 3.10.11. 光电放大电路
- 光电放大电路：
    - 原理：给LD一个反向电压，它就会有电流。
        - 利用JFET的Ids电流，可以算出Vgs，然后就算出了LD上的电压
    - 典型电路：
	    - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600803_20200811234419926_1620228624.png )
### 3.10.12. 电流检测
- 电流检测
    - 集成电流检测芯片
    - 串入检流电阻
        - 种类：
            - 高边：对运放的共模输入电压要求高
                - 之前用的是隔离电源，然后浮地相接。就是gnd1接了-100V
            - 底边：对运放简单，但是gnd叠加了一个电压，不推荐
            - 典型电路
	            - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600804_20200811234438977_1089839608.png )
        - 匹配电阻：
            - 因为U+和U-的输出电阻不匹配，会影响运放的偏置电流
            - 详细分析：
	            - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600806_20200811234541572_308698008.png )
        - 仪表放大器电路：
            - 优点：简单
            - 缺点：
                - 输入的共模电压要求很低，比供电低很多。
                - 增益和输入的共模电压有关系
            - 典型电路：
	            - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600804_20200811234453759_1046266393.png )
        - 差动放大电路：
            - 优点：共模电压很高
            - 缺点：先把差模信号缩小了，再放大，这样引入噪声了。
            - 典型电路：AD628
	            - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600805_20200811234509736_1003165515.png )
            - 典型电路：改进AD629
	            - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600807_20200811234711962_2114412951.png )
        - 改变普通运放的供电：
            - 优点：使用普通运放。利用mos吸收了压差
            - 典型电路
### 3.10.13. 模拟隔离放大电路：
        - 原理：利用两个特性一样的光耦，实现模拟信号的隔离放大
        - 典型电路：
	        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600809_20200811234809351_1708978105.png )


## 3.11. 恒流源
- 基本的恒流源：
	- 注意： 一个是source 一个是drain。根据load是接vcc还是gnd
	- 注意：要保证环路是负反馈的，所以NP-MOS不是随意选的。
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600792_20200810110838190_1739752993.png )



# 4. 滤波器
省略了高通，带通，带阻的内容，还有椭圆滤波。
PGA： programmable gain amplifier
VGA：voltage control gain amplifier
Tpd：Time propagation delay
## 4.1. 基本概念
- f0:特征频率
    - 运放的相移为一半的位置
- fc：截止频率
    - 比中频增益低3db的位置
- K：k=fc/f0
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600820_20200813200526168_1824873.png )
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600820_20200813200630177_605869453.png )
- 低通传函和Q的定义：
	- 知道Q，就知道K，从fc就可以推导出f0，那就把整个表达式写出来了
	- Q的值= 特征频率处的增益/中频增益
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600817_20200813195135442_1737040693.png )
- 低通传函：
    - Am*1/(1+SRC)=Am*1/(1+jf/f0) 
    - 相位移动：
        - 同向放大: 0- -90
        - 反向放大:180 - 90
- 高通传函
    - Am*1/(1-jf0/f) 
    - 相位移动：
        - 同向放大: 0- 90
        - 反向放大:180 - 270
- 全通：
    - Am*(1-src)/(1+src)
- 带通传函
- 压控滤波
    - 截止频率收到电压的控制
    - 本质是改变了Rf
- 滤波器的分类
	- 巴特沃斯
	    - Q=0.707
	    - 特性：
	        - fc=f0
	- 切比雪夫
	    - Q>0.707
	    - 特性：
	        - 陡峭
	        - 通带不平
	- 贝塞尔
	    - Q<0.707
	    - 特性：
	        - 下降最平缓
	        - 群延时最小
        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600818_20200813200222205_1550229933.png )

## 4.2. 信号处理电路
### 4.2.1. 峰值检测
- 方法1:二极管检测
    - 典型电路
    - 优点：
        - 简单
        - 1V电压可以检测到0.98
    - 缺点：
        - 要考虑二极管的反向漏电流和正向充电的电流动态平衡
        - 二极管没有0.7V的压降了，因为导通了就会有微弱的电流给电容充电
        - 二极管只能针对100Khz以下的信号

## 4.3. 二阶滤波器：
- 一般设计及通一阶就可以了，一阶低通可以实现增益和滤波
- 要搞懂二阶滤波器的传函公式，先求f0，再确定Q
- Q就是波形在f0的位置，凸起有多高
- f0就是分母只有虚部时候的样子

### 4.3.1. SK
sallen-key
- 结构：
   - 4电阻：增益不可调
       - 当RC一样，那就是Q=0.5贝塞尔
       - C1=2C2，那就是巴特沃斯
       - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600818_20200813200427563_1442878527.png )
       - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600819_20200813200446852_1074061365.png )
       - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600822_20200813201141454_520106668.png )
   - 6电阻：增益可调
	   - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600821_20200813200701474_1627926144.png )
- 优点：
   - 简单
- 缺点：
   - 有高频馈通现象，导致高频增益不是很小
       - R1选小，用MFB
       - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600825_20200813201336229_1916555367.png )
   - 增益和Q联动了
       - 如果制定了Q，就可以使用易用型结构
- 单电源调整：
   - 4电阻：把R1分成两部分
	   - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600823_20200813201242155_1518769372.png )
   - 6电阻：把R1分成两部分，同时增益也要变
- 传递型：
   - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600824_20200813201308296_966206962.png )
   - 4电阻：直接用
   - 6电阻：实现不了
- 注意增益带宽积
   - 在fc处一定要保证，不然满足不了深度负反馈
### 4.3.2. MFB
multi feedback
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600823_20200813201200524_1174325786.png )
- 优点：
    - 增益和Q可以分别调节
- 缺点：
    - 使用电容控制增益，误差会很大
    - 只能实现反向放大
- 单电源调整：
    - 在同向端，增加分压回路
- 传递型：
    - 改变一下分压回路
- 注意增益带宽积
    - 在fc处一定要保证，不然满足不了深度负反馈

## 4.4. 电阻的选择
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600827_20200813201518551_1780466292.png )



# 5. ADC

## 5.1. 原理：
- 采样阶段
    - 采样时间要大于RC充电时间常数
        - C是ADC里自带的电容，R有一部分是外界的输入电阻，所以不能太大
        - 跟随器，调节输出阻抗
- 转换阶段
## 5.2. 混叠：
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600832_20200815094524901_1559407882.png )
- 采样率不满足奈奎斯特采样定理，一个周期没有两个点。
- 结果：采集到的高频，会被重建成一个低频。当然，这个高频也是我们不想看到的
- 另一个原因：可以把运放前端带来的白噪声也滤除
- 解决：前级加入低通滤波，把不想要的高频滤除
## 5.3. ADC的前驱动电路
- 加入抗混叠的C之后，运放会多一个极点，导致运放的相位裕度不够，不稳定。
	- 所以要加入隔离电阻Riso
	- 但是单纯的Riso会导致ADC采样到的电压是有误差的，所以高精度的还需要加入反馈
- Riso的选取：
    - 考虑去混叠
        - 截止频率计算
    - 考虑采样保持时间
        - 一般是4个SCLK，定下最小采样时间
    - 考虑引入的误差：
        - 误差控制在0.5LSB，那么就和ADC的位数有关系，还和最小采样时间有关
        - ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600833_20200815094659761_1312755857.png )
- R选取：
    - 放大倍数和静默电压的限制
    - 为了最小化偏置电流，需要阻抗匹配
- C的选取：
    - 一般是ADC内部电容的10倍左右
    - 俩个作用：抗混叠+给ADC电容提供大电流
- 复杂的前驱：
	- 其实是关注Aol和1/ß曲线的交点。
	- **1/ß曲线**：
		- 当输出接电容，多了一个极点，就会上翘
		- Cf带入了一个零点，补偿了极点
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600835_20200815095713648_626854697.png )
- 一般的ADC驱动，带电平提升
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600834_20200815095607003_1721780746.png )
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600832_20200815094616386_1077844786.png )




## 5.4. ADC信号的失真：
- 大信号—slew rate
	- 电压驱动能力不够。
	- SR大的Iq的也会很大
- 小信号—增益带宽积
	- 这个时候电压驱动能力以及不是瓶颈了。
	- 但是信号的带宽和上升时间是有关系的：`f=0.35/Tr`
	- 意味着，f是截止频率，在这个频率之内的信号才能体现在时域上


# 6. 通用知识

## 6.1. 单刀单掷
![](https://gitee.com/AndrewChu/markdown/raw/master/1598600787_20200804072323244_804659630.png =666x)
## 6.2. 截止频率
电路：
- 截止频率
    - 物理上，只要强度下降到原先的0.707
- 特征频率：
    - 数学书，相角为一半
        - 一阶系统为45度
        - 二阶系统为90度
## 6.3. 谐波失真度
全谐波失真度：经过fft之后，高次谐波和基波的比
![](https://gitee.com/AndrewChu/markdown/raw/master/1598600794_20200810160716914_1320001037.png )

失真度的测量：
输入一个标准正弦，测量输出，适合-100db以内的

原因：
因为BJT的输入输出伏安特性都不是线性的，说以Auo也不是线性的



## 6.4. 运放和比较器的差别
- 运放的开环增益很大
- 运放的Vos小
- 比较器的输出延时小
- 比较器从输出饱和到另一端的饱和，时间短
- 比较器适合宽电源输入

## 6.5. 容差
对电阻来说，就是精度和温漂系数。
容差肯定是存在的，但是要明确关键参数指标，哪些容差会成为瓶颈。
容差一方面是器件物理特性，另一方面是电路结构决定的，对某些容差会特别敏感。比如差分运放的四个电阻的匹配问题，只能寻求集成了四个精密电阻的集成运放；或者直接改拓扑。
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600822_20200813200756843_1613039428.png )


## 6.6. 文式电桥
用于震荡电路
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600826_20200813201439263_1438831816.png )

## 6.7. 示波器的探头带宽
示波器探头的限制，就是个截止频率20Mhz的低通
使用10x的探头，截止频率可以扩大10倍，但是需要探头匹配
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600828_20200815092500172_120240357.png )
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600828_20200813201552996_1259832346.png )

## 6.8. 功放的分类
主要是根据输出管的导通角
- 甲类：导通角360°，所以功耗损耗巨大
- 乙类：接近180°
- 甲乙类：180°

现在使用的主要是甲类和甲乙类
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600829_20200815092717590_97568272.png )




## 6.9. 频率和上升时间的关系
高频指的不是基波频率，指的是fft之后所包含的频率
观察时域的上升时间，就可以得到信号的带宽。
信号的带宽：就是信号的有用的f

上升时间：波形的0.1到0.9
最终公式：Fmax=0.35/T

- 方法1：
	- 就是sinx:Tr=1/2T=f/pi
- 方法2:
	- 从一阶信号的RC时间常数去考虑
	- fc=1/2piRC。fc就是运放的闭环带宽
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600837_20200815103614412_1380000882.png )
	- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600838_20200815103622652_851436174.png )

## 6.10. 时域和频域的联系
可以从时域的过冲上，推出频域的相位裕度
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600839_20200815103754596_1404236457.png )
## 6.11. 匹配电阻
不同材质的特征阻抗。
注意是针对高频信号才需要阻抗匹配
- ![](https://gitee.com/AndrewChu/markdown/raw/master/1598600833_20200815094758485_240699321.png )

















